<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akun Premium Store | Akun Premium Terpercaya</title>
    <link rel="stylesheet" href="user.css" />
</head>

<body>
    <header>
        <div class="header-container">
            <div class="logo">Akun<span>Premium</span></div>
            <nav>
                <ul>
                    <li><a href="#hero">Beranda</a></li>
                    <li><a href="#products">Produk</a></li>
                    <li><a href="#how-it-works">Cara Beli</a></li>
                    <li><a href="#testimonials">Testimoni</a></li>
                    <li><a href="#footer">Kontak</a></li>
                </ul>
            </nav>

            <div class="header-actions">
    <div class="search-container" style="position: relative;">
        <span class="search-icon" id="searchIcon" style="cursor:pointer;">🔍</span>
        <input 
            type="text" 
            id="searchInput" 
            placeholder="Cari produk..." 
            style="display:none; position:absolute; top:30px; right:0; padding:8px 12px; border:1px solid #ccc; border-radius:6px; width:200px; z-index:1000;"
        />
    </div>

    <div class="cart-icon" id="cartIcon" style="cursor:pointer; margin-left:15px; position: relative;">
    🛒
    <span id="cartCount" style="position: absolute; top: -5px; right: -10px; background-color: #ff0070; color: white; border-radius: 50%; padding: 2px 6px; font-size: 12px; line-height: 1;">0</span>
</div>

    <div id="profileIcon" style="margin-left:20px; cursor:pointer;">
        <img id="headerAvatar" 
             src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRM19VBNETVqcLJcoO6pq6cSz6JHrCzJfkb3g&s" 
             alt="Profil Pengguna" 
             style="width:38px;height:38px;border-radius:50%;border:2px solid #eee;box-shadow:0 2px 8px rgba(0,0,0,0.07);background:#fff;">
    </div>
    <button id="logoutBtn" class="btn btn-logout" style="margin-left:20px;">Logout</button>
</div>

<div id="profilePopup" class="profile-popup" style="display:none;">
  <div class="profile-popup-header">
    <img id="popupAvatar" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRM19VBNETVqcLJcoO6pq6cSz6JHrCzJfkb3g&s" alt="Avatar" class="profile-avatar">
    <div>
      <div class="profile-popup-name" id="popupProfileName"></div>
      <div class="profile-popup-email" id="popupProfileEmail"></div>
    </div>
  </div>
  <hr>
  <button class="btn btn-profile-close" onclick="document.getElementById('profilePopup').style.display='none'">Tutup</button>
</div>
    </header>

<div id="profilePopup" class="profile-popup" style="display:none; position:absolute; top:70px; right:40px; background:#fff; border:1px solid #ddd; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.08); padding:18px 28px; z-index:1000;">
    <h4 style="margin-top:0;">Profil Pengguna</h4>
    <p><strong>Nama:</strong> <span id="popupProfileName"></span></p>
    <p><strong>Email:</strong> <span id="popupProfileEmail"></span></p>
    <button onclick="document.getElementById('profilePopup').style.display='none'" style="margin-top:10px;">Tutup</button>
</div>

 <section class="hero" id="hero">
        <div class="hero-content">
            <h1>Toko Akun Premium Terpercaya</h1>
            <p>Dapatkan akses premium ke berbagai platform digital dengan harga terjangkau. Transaksi aman, garansi 100%, dan layanan terbaik.</p>
            <a href="#products" class="btn">Lihat Produk</a>
        </div>
    </section>

     <section class="features" id="features">
        <h2 class="section-title">Mengapa Memilih Kami</h2>
        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">🔒</div>
                <h3 class="feature-title">100% Aman</h3>
                <p class="feature-desc">Transaksi dilakukan dengan sistem yang aman dan terjamin keamanannya untuk melindungi data Anda.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">⚡</div>
                <h3 class="feature-title">Proses Cepat</h3>
                <p class="feature-desc">Akun dikirim secara instan setelah pembayaran dikonfirmasi. Tidak perlu menunggu lama.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">🛡</div>
                <h3 class="feature-title">Garansi Penuh</h3>
                <p class="feature-desc">Garansi penggantian jika akun bermasalah. Kami menjamin kepuasan pelanggan.</p>
            </div>
        </div>
    </section>

    <section class="products" id="products">
  <h2 class="section-title">Produk Akun Premium</h2>
  <div class="products-grid" id="productsGrid">
    <p>Memuat produk dari database...</p>
</div>
</section>


     <section class="how-it-works" id="how-it-works">
        <h2 class="section-title">Cara Pembelian</h2>
        <div class="steps">
            <div class="step">
                <div class="step-number"></div>
                <h3 class="step-title">Pilih Produk</h3>
                <p class="step-desc">Pilih akun premium yang Anda inginkan dari berbagai platform tersedia.</p>
            </div>
            <div class="step">
                <div class="step-number"></div>
                <h3 class="step-title">Bayar</h3>
                <p class="step-desc">Lakukan pembayaran melalui metode yang tersedia (QRIS, Bank, E-Wallet).</p>
            </div>
            <div class="step">
                <div class="step-number"></div>
                <h3 class="step-title">Konfirmasi</h3>
                <p class="step-desc">Konfirmasi pembayaran dan tunggu akun dikirim ke email/WhatsApp Anda.</p>
            </div>
            <div class="step">
                <div class="step-number"></div>
                <h3 class="step-title">Selesai</h3>
                <p class="step-desc">Akun premium siap digunakan. Nikmati layanan tanpa batas!</p>
            </div>
        </div>
    </section>

    <section class="testimonials" id="testimonials">
        <h2 class="section-title">Testimoni Pelanggan</h2>
        <div class="testimonials-grid" id="testimonialsGrid">
            <p>Memuat ulasan pelanggan...</p>
        </div>
        
        <div class="card review-form-container">
            <h3>Tulis Ulasan Anda</h3>
            <p>Anda hanya bisa memberikan ulasan setelah pembelian produk selesai dan disetujui Admin.</p>
            <form id="reviewForm" data-product-id="P_SPOTIFY_123"> 
                <div class="form-group">
                    <label class="form-label">Ulasan Anda</label>
                    <textarea class="form-textarea" id="reviewText" placeholder="Tulis ulasan Anda di sini..." required></textarea>
                </div>
                <button type="submit" class="btn btn-primary">Kirim Ulasan</button>
            </form>
        </div>
    </section>

<section id="faq" class="content-section">
    <h2>❓ Pertanyaan yang Sering Diajukan (FAQ)</h2>
    <p class="section-description">Temukan jawaban cepat atas pertanyaan umum seputar Akun Premium dan layanan kami.</p>

    <div class="faq-container" style="max-width: 800px; margin: 0 auto;">
        
        <div class="faq-item" style="border: 1px solid #eee; margin-bottom: 15px; border-radius: 8px;">
            <div class="faq-question" style="padding: 15px; cursor: pointer; font-weight: bold; border-radius: 8px 8px 0 0;">
                Q: Apakah Akun Premium yang dijual legal dan aman?
            </div>
            <div class="faq-answer" style="padding: 15px; border-top: 1px solid #eee; display: none;">
                A: Ya, semua akun yang kami sediakan adalah <strong>legal</strong> dan dibeli secara resmi. Kami menjamin keamanan akun dan memberikan <strong>garansi penuh</strong> selama masa berlangganan yang Anda beli.
            </div>
        </div>

        <div class="faq-item" style="border: 1px solid #eee; margin-bottom: 15px; border-radius: 8px;">
            <div class="faq-question" style="padding: 15px; cursor: pointer; font-weight: bold; border-radius: 8px 8px 0 0;">
                Q: Bagaimana proses pengiriman akun dilakukan?
            </div>
            <div class="faq-answer" style="padding: 15px; border-top: 1px solid #eee; display: none;">
                A: Setelah pembayaran Anda terkonfirmasi, detail akun akan kami kirimkan melalui <strong>email/WhatsApp</strong> yang Anda daftarkan dalam waktu <strong>maksimal 1x24 jam</strong> (biasanya dalam hitungan menit).
            </div>
        </div>

        <div class="faq-item" style="border: 1px solid #eee; margin-bottom: 15px; border-radius: 8px;">
            <div class="faq-question" style="padding: 15px; cursor: pointer; font-weight: bold; border-radius: 8px 8px 0 0;">
                Q: Apa yang harus saya lakukan jika akun mati/bermasalah sebelum masa garansi berakhir?
            </div>
            <div class="faq-answer" style="padding: 15px; border-top: 1px solid #eee; display: none;">
                A: Segera hubungi <strong>Customer Service</strong> kami. Jika masalahnya teknis dan bukan karena pelanggaran S&K, kami akan memproses <strong>penggantian (replacement) akun gratis</strong> secepatnya.
            </div>
        </div>

    </div>
</section>

<section id="terms" class="content-section">
    <h2>📜 Syarat & Ketentuan</h2>
    <p class="section-description">Mohon baca dengan saksama Syarat & Ketentuan berikut sebelum melakukan pembelian.</p>

    <div class="terms-container" style="max-width: 800px; margin: 0 auto; text-align: left; background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        
        <h3>1. Ketentuan Umum</h3>
        <ul style="list-style-type: decimal; padding-left: 20px; margin-bottom: 20px;">
            <li>Dengan melakukan pembelian, Pelanggan dianggap telah membaca, memahami, dan menyetujui seluruh <strong>Syarat & Ketentuan</strong> yang berlaku.</li>
            <li>Kami berhak mengubah S&K ini sewaktu-waktu tanpa pemberitahuan sebelumnya.</li>
        </ul>

        <h3>2. Garansi dan Pembatalan</h3>
        <ul style="list-style-type: decimal; padding-left: 20px; margin-bottom: 20px;">
            <li>Garansi berlaku sesuai durasi produk yang dibeli dan hanya mencakup masalah teknis akun.</li>
            <li><strong>Garansi Hangus (VOID)</strong> jika: mengganti *password* atau *email* pada akun *sharing*, atau menjual kembali akun.</li>
            <li>Pembatalan dan pengembalian dana <strong>TIDAK</strong> berlaku setelah akun terkirim (kecuali akun terbukti cacat permanen).</li>
        </ul>

        <h3>3. Batasan Tanggung Jawab</h3>
        <ul style="list-style-type: decimal; padding-left: 20px;">
            <li>Kami <strong>TIDAK</strong> bertanggung jawab atas kesalahan input data kontak (email/nomor HP) oleh Pelanggan.</li>
            <li>Kami tidak bertanggung jawab atas masalah jaringan atau perangkat yang digunakan Pelanggan untuk mengakses layanan.</li>
        </ul>
        
    </div>
</section>

<section id="privacy" class="content-section">
    <h2>🔒 Kebijakan Privasi</h2>
    <p class="section-description">Kami menghargai privasi Anda. Kebijakan ini menjelaskan bagaimana kami mengumpulkan, menggunakan, dan melindungi informasi Anda.</p>

    <div class="terms-container" style="max-width: 800px; margin: 0 auto; text-align: left; background-color: white; padding: 30px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        
        <h3>1. Informasi yang Kami Kumpulkan</h3>
        <p>Kami hanya mengumpulkan informasi yang diperlukan untuk memproses transaksi, seperti:</p>
        <ul style="list-style-type: disc; padding-left: 20px; margin-bottom: 20px;">
            <li><strong>Data Pribadi:</strong> Nama lengkap, Email, dan Nomor Kontak/WhatsApp.</li>
            <li><strong>Data Transaksi:</strong> Detail produk yang dibeli dan metode pembayaran.</li>
        </ul>

        <h3>2. Penggunaan Informasi</h3>
        <p>Informasi Anda digunakan secara eksklusif untuk:</p>
        <ul style="list-style-type: disc; padding-left: 20px; margin-bottom: 20px;">
            <li><strong>Memproses Transaksi:</strong> Untuk mengirimkan produk (akun premium).</li>
            <li><strong>Dukungan Layanan:</strong> Untuk komunikasi garansi, replacement, atau dukungan teknis.</li>
        </ul>

        <h3>3. Perlindungan Data</h3>
        <p>Kami berkomitmen melindungi kerahasiaan data pribadi Anda. Kami <strong>TIDAK</strong> akan menjual, menyewakan, atau mendistribusikan informasi pribadi Anda kepada pihak ketiga.</p>
        
    </div>
</section>

     <section class="cta" id="cta">
        <h2>Siap Nikmati Pengalaman Premium?</h2>
        <p>Bergabung dengan ribuan pelanggan yang telah merasakan manfaat akun premium dengan harga terjangkau.</p>
        <a href="#products" class="btn">Lihat Semua Produk</a>
    </section>

    <footer id="footer">
        <div class="footer-container">
            <div class="footer-section">
                <div class="footer-logo">Akun<span>Premium</span></div>
                <p class="footer-desc">Toko akun premium terpercaya dengan layanan terbaik dan garansi 100% untuk kepuasan pelanggan.</p>
                <div class="social-links">
                    <a href="#kontak" class="social-link">WA</a>
                    <a href="#kontak" class="social-link">TG</a>
                    <a href="#kontak" class="social-link">IG</a>
                    <a href="#kontak" class="social-link">FB</a>

                </div>
            </div>
            <div class="footer-section">
                <h3>Produk</h3>
                <ul class="footer-links">
                    <li><a>Spotify Premium</a></li>
                    <li><a>Netflix Premium</a></li>
                    <li><a>YouTube Premium</a></li>
                    <li><a>Disney+ Hotstar</a></li>
                    <li><a href="#products">Lainnya</a></li>
                </ul>
            </div>
            <div id="kontak" class="footer-section">
                <h3>Bantuan </h3>
                <ul class="footer-links">
                    <li><a href="#how-it-works">Cara Pembelian</a></li>
                    <li><a href="#faq">FAQ</a></li>
                    <li><a href="#terms">Syarat & Ketentuan</a></li>
                    <li><a href="#privacy">Kebijakan Privasi</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Kontak</h3>
                <ul class="footer-links">
                    <li>Email: support@akunpremium.com</li>
                    <li>WhatsApp: +62 812-3456-7890</li>
                    <li>Telegram: @akunpremium</li>
                    <li>Instagram: @akunpremium</li>
                    <li>Facebook: @akunpremium</li>
                    <li>Jam Operasional: 08:00 - 22:00 WIB</li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            ﾂｩ 2025 Akun Premium Store. All rights reserved.
        </div>
    </footer>

<script src="user.js"></script>
<!-- indexuser.html - Bagian Script -->
<script>
    // ===================================
    // 2. 🛒 SISTEM KERANJANG & HITUNGAN (DARI DATABASE)
    // ===================================
    let cart = []; // Akan diisi dari API

    function updateCartCount() {
        const totalItems = cart.reduce((sum, item) => sum + item.qty, 0);
        document.getElementById("cartCount").textContent = totalItems;
        document.getElementById("cartCount").style.display = totalItems > 0 ? 'inline' : 'none';
    }

    function loadCartFromDB() {
        fetch('http://localhost/Semester%203/Toko%20premium%20store/api_store/api_storeapi/get_cart.php')
            .then(r => r.json())
            .then(data => {
                cart = data.cart || [];
                updateCartCount();
            })
            .catch(err => console.error('Error loading cart:', err));
    }

    // Panggil saat halaman load
    loadCartFromDB();

    // Pilih semua tombol keranjang
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('add-to-cart') || e.target.classList.contains('add-to-cart-standalone')) {
            const btn = e.target;
            const product_id = btn.dataset.id || btn.dataset.productId; // Asumsikan dataset.id ada
            const product_name = btn.dataset.name;
            const price = parseInt(btn.dataset.price);

            if (!product_id || !product_name || isNaN(price)) {
                alert('Produk tidak valid.');
                return;
            }

            fetch('http://localhost/Semester%203/Toko%20premium%20store/api_store/api_storeapi/add_to_cart.php', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ product_id, product_name, price, qty: 1 })
            })
            .then(r => r.json())
            .then(data => {
                if (data.success) {
                    alert(`${product_name} ditambahkan ke keranjang!`);
                    loadCartFromDB(); // Reload cart
                } else {
                    alert('Gagal menambah ke keranjang.');
                }
            })
            .catch(err => console.error('Error adding to cart:', err));
        }
    });

    // Checkout langsung (Tombol Beli Sekarang)
    document.addEventListener('click', function(e) {
        if (e.target.classList.contains('checkout-now')) {
            const btn = e.target;
            const product_name = btn.dataset.name;
            const price = parseInt(btn.dataset.price);

            // Tambah ke cart dulu, lalu redirect
            fetch('http://localhost/Semester%203/Toko%20premium%20store/api_store/api_storeapi/add_to_cart.php', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ product_id: btn.dataset.id, product_name, price, qty: 1 })
            })
            .then(() => {
                window.location.href = 'cart.html';
            });
        }
    });

    // Klik ikon keranjang di header
    document.getElementById("cartIcon").addEventListener("click", () => {
        window.location.href = "cart.html";
    });

    // Logout (sudah menggunakan API)
    document.getElementById('logoutBtn')?.addEventListener('click', function() {
        fetch('http://localhost/Semester%203/Toko%20premium%20store/api_store/api_storeapi/logout_process.php')
            .then(r => r.json())
            .then(data => {
                alert('Logout berhasil!');
                window.location.href = 'loginuser.html';
            })
            .catch(() => {
                alert('Gagal logout. Silakan coba lagi.');
            });
    });

    // Check session (sudah ada)
    fetch('http://localhost/Semester%203/Toko%20premium%20store/api_store/api_storeapi/check_session.php')
        .then(r => r.json())
        .then(data => {
            if (data.logged_in) {
                
                document.getElementById('popupProfileName').textContent = data.user_name || 'Pengguna Akun Premium';
                document.getElementById('popupProfileEmail').textContent = data.user_email || 'email@example.com';
            }
        });

    // Profil popup (sudah ada)
    document.getElementById('profileIcon')?.addEventListener('click', function(e) {
        const popup = document.getElementById('profilePopup');
        if (userProfileData) {
            popup.style.display = popup.style.display === 'block' ? 'none' : 'block';
        } else {
            alert('Anda belum login.');
        }
    });

// ===================================
// 🧠 LOAD PRODUK DARI DATABASE (products.php)
// ===================================
function loadProducts() {
  fetch('http://localhost/Semester%203/Toko%20premium%20store/api_store/api_storeapi/products.php')
    .then(r => r.json())
    .then(products => {
      const grid = document.getElementById('productsGrid');
      grid.innerHTML = ''; // kosongkan isi sebelumnya

      if (!products.length) {
        grid.innerHTML = '<p>Tidak ada produk tersedia saat ini.</p>';
        return;
      }

      products.forEach(p => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
          <img src="${p.image_url}" alt="${p.name}" class="product-img" onerror="this.src='https://via.placeholder.com/150'">
          <h3>${p.name}</h3>
          <p>Harga: Rp${parseInt(p.price).toLocaleString('id-ID')}</p>
          <div class="product-buttons" style="display:flex;gap:10px;">
            <button class="btn add-to-cart-standalone"
              data-id="${p.id}"
              data-name="${p.name}"
              data-price="${p.price}"
              style="background-color:#555;color:white;flex-grow:1;padding:10px;">
              🛒 Tambah
            </button>
            <button class="btn checkout-now"
              data-id="${p.id}"
              data-name="${p.name}"
              data-price="${p.price}"
              style="flex-grow:1;padding:10px;">
              💳 Beli Sekarang
            </button>
          </div>
        `;
        grid.appendChild(card);
      });
    })
    .catch(err => {
      console.error('Error loading products:', err);
      document.getElementById('productsGrid').innerHTML = '<p>Gagal memuat produk.</p>';
    });
}

// Jalankan saat halaman dibuka
loadProducts();

</script>
</body>
</html>

